<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- fontawesome cdn -->
  <script src="https://kit.fontawesome.com/fa8d81743a.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/medicine_prescription_popup.css">
  <title>Geomin-medicine-search</title>
</head>
<body>

<section>

  <article id="medicineBox">

    <div id="search-box">

      <div>
        <select name="type" id="type">
          <option value="" selected>선택</option>
          <option value="itemName">의약품명</option>
          <option value="entpName">회사명</option>
          <option value="itemSeq">품목기준코드 </option>
        </select>
      </div>

      <div>
        <input type="text" placeholder="검색어 입력" autocomplete="off" id="search-bar">
      </div>

      <button type="button" id="search-btn" alt="검색버튼">
        <i class="fa-solid fa-magnifying-glass" style="color: #000000;"></i>
      </button>
    </div>

    <table>

      <caption>
        <span th:text="${keyword != null && keyword != 'null'? keyword : '' }"></span>검색 결과 총
        <span th:text="${apiResult.getBody().getTotalCount()}"></span>
      </caption>

      <tbody>

      <tr>
        <th>품목기준코드</th>
        <th>의약품명</th>
        <th>업체명</th>
        <th>효능</th>
        <th>사용법</th>
        <!-- <th>복용전 주의사항</th> -->
        <th>복용시 주의사항</th>
        <th>상호작용(기타)</th>
        <th>부작용</th>
        <th>낱알 이미지</th>
        <th></th>
      </tr>


      <th:block th:if="${medicineDTOList != null}" th:each="medicine : ${medicineDTOList}">
        <tr>
          <td th:text="${medicine.getItemSeq()}"></td>
          <td th:text="${medicine.getItemName()}"></td>
          <td th:text="${medicine.getEntpName()}"></td>
          <td th:text="${#strings.isEmpty(medicine.getEfcyQesitm())? '기록없음' : medicine.getEfcyQesitm()}"></td>
          <td th:text="${#strings.isEmpty(medicine.getUseMethodQesitm())? '기록없음' : medicine.getUseMethodQesitm()}"></td>
          <td th:text="${#strings.isEmpty(medicine.getAtpnQesitm())? '기록없음' : medicine.getAtpnQesitm()}"></td>
          <td th:text="${#strings.isEmpty(medicine.getIntrcQesitm())? '기록없음' : medicine.getIntrcQesitm()}"></td>
          <td th:text="${#strings.isEmpty(medicine.getSeQesitm())? '기록없음' : medicine.getSeQesitm()}"></td>

          <td th:if="${medicine.getItemImage() == null}">이미지 없음</td>
          <td class="imgBox" th:if="${medicine.getItemImage() != null}">
            <img th:src="${medicine.getItemImage()}" th:alt="${medicine.getItemName()}">
          </td>
          <td><button class="btn">선택</button></td>
        </tr>
      </th:block>

      <!-- <tr>
          <td>199300758</td>
          <td>트라몰정160밀리그람(아세트아미노펜)</td>
          <td>코오롱제약(주)</td>
          <td>만 12세 이하의 소아는 1회 권장용량을 4~6시간마다 필요시 복용합니다.이 약은 가능한 최단기간동안 최소 유효용량으로 복용하며, 1일 5회(75 mg/kg)을 초과하여 복용하지 않습니다.
              몸무게를 아는 경우 몸무게에 따른 용량(10~15 mg/kg)으로 복용하는 것이 더 적절합니다.연령대별 권장용량은 허가사항을 참고하십시오.</td>
          <td>이 약은 감기로 인한 발열 및 동통(통증), 두통, 신경통, 근육통, 월경통, 염좌통(삔 통증)과 치통, 관절통, 류마티양 동통(통증)에 사용합니다.</td>
          <td>이 약에 과민증 환자, 소화성궤양, 심한 혈액 이상 환자, 심한 간장애, 심한 신장(콩팥)장애, 심한 심장기능저하 환자, 아스피린 천식(비스테로이드성 소염(항염)제에
              의한 천식발작 유발)또는 경험자, 바르비탈계 약물 또는 삼환계 항우울제를 복용하는 환자, 알코올을 복용한 사람, 갈락토오스 불내성, Lapp 유당분해효소 결핍증 또는 포도당-갈락토오스 흡수장애 등의 유전적인 문제가 있는 환자는 이 약을 복용하지 마십시오.이 약을 복용하기 전에 간장애 또는 경험자, 신장(콩팥)장애 또는 경험자, 소화성궤양의 경험자, 혈액이상 또는 경험자, 출혈경향이 있는 환자,
              심장기능이상이 있는 환자, 과민증의 경험자, 기관지 천식 환자, 노인, 만 2세 미만의 소아, 임부 또는 수유부는 의사 또는 약사와 상의하십시오.</td>
          <td>아세트아미노펜을 포함하는 다른 제품, 바르비탈계 약물, 삼환계 항우울제, 알코올과 함께 복용하지 마십시오.와파린, 리튬, 티아지드계 이뇨제,
              다른 소염진통제와 함께 복용 시 의사 또는 약사와 상의하십시오.</td>
          <td>쇽(호흡곤란, 두드러기 등), 아나필락시양 증상(과민성유사증상 : 호흡곤란, 온몸이 붉어짐, 혈관부기, 두드러기 등), 천식발작, 혈소판 감소, 과립구감소, 용혈성빈혈,
              메트헤모글로빈혈증, 혈소판기능 저하(출혈시간 연장), 청색증, 구역, 구토, 식욕부진, 피부발진, 피부점막안증후군(스티븐스-존슨증후군), 독성표피괴사용해(리엘증후군),
              AST 상승, ALT 상승, 소양성(가려움)발진, 고정발진 등이 나타나는 경우 즉각 복용을 중지하고 의사 또는 약사와 상담하십시오.</td>
          <td class="imgBox"><img src="https://nedrug.mfds.go.kr/pbp/cmn/itemImageDownload/1Oikd3yeYoj"  alt=""></td>
          <td><button class="btn">선택</button></td>
      </tr> -->

      </tbody>
    </table>

    <div id="no-data" th:if="${medicineDTOList == null}">
      <span>검색 결과가 없습니다.</span>
    </div>

    <div>
      <ul id="vital-sign-pageing">
        <li th:if="${apiResult.getBody().getPageNo() > apiResult.getBody().getNumOfRows() }">
          <a th:href="@{'/medicine-prescription?type=' + ${type} + '&keyword=' + ${keyword} + '&page=' + ${apiResult.getBody().getPrevGroupStartPage()} }">
            <i class="fa-solid fa-angle-left" style="color: #000000;"></i>
          </a>
        </li>

        <th:block th:each="page : ${#numbers.sequence(apiResult.getBody().getCurrentGroupStartPage() , apiResult.getBody().getCurrentGroupEndPage())}">
          <li th:classappend="${page == apiResult.getBody().getPageNo()}? 'active' : '' ">
            <a th:href="@{'/medicine-prescription?type=' + ${type} + '&keyword=' + ${keyword} + '&page=' + ${page} }"
               th:text="${page}">
            </a>
          </li>
        </th:block>

        <li th:if="${apiResult.getBody().getCurrentGroupEndPage() < apiResult.getBody().getTotalPages()}">
          <a th:href="@{'/medicine-prescription?type=' + ${type} + '&keyword=' + ${keyword} + '&page=' + ${apiResult.getBody().getNextGroupStartPage()} }">
            <i class="fa-solid fa-angle-right" style="color: #000000;"></i>
          </a>
        </li>

      </ul>
    </div>

  </article>

  <article id="medicineSelectedBox">

    <div id="header">
      <span>의약품명</span>
      <span>1회 투여량</span>
      <span>1일 투여횟수</span>
      <span>투약일수</span>
      <span></span>
    </div>

    <div id="pills">

      <div id="no-pills">
        선택된 의약품이 없습니다.
      </div>

      <!-- <ul class="pill">
          <li>트라몰정160밀리그람(아세트아미노펜)</li>
          <li><input type="text" value="0.5"></li>
          <li><input type="text" value="0.5"></li>
          <li><input type="text" value="0.5"></li>
          <li>X</li>
      </ul> -->


    </div>

    <div id="footer">
      <button class="btn" id="clearBtn">모두 삭제</button>
      <button class="btn" id="okBtn">확인</button>
    </div>





  </article>



</section>


<script src="https://code.jquery.com/jquery-latest.min.js"></script>
 <script src="/js/medicine_prescription_popup.js"></script>
<script>

</script>
</body>
</html>